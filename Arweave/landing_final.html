<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lacoste | Digital Product Passport</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f5f5f7; }
        .lacoste-green { color: #004526; }
        .bg-lacoste { background-color: #004526; }
        html { scroll-behavior: smooth; }
        /* Ocultar scrollbar pero permitir scroll */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { motion } = window.Motion;

        // --- SISTEMA DE ÍCONOS SVG NATIVOS (Para evitar errores de carga) ---
        const Icons = {
            MapPin: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            Shirt: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20.38 3.4a2 2 0 0 0-1.2-1.28l-3.11-1a2 2 0 0 0-1.34 0l-3.11 1a2 2 0 0 0-1.2 1.28L9 16.2V22h6v-5.8l-1.38-12.8Z"/><path d="M9 3 4 5v13h5"/></svg>,
            Droplets: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.8-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"/><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"/></svg>,
            Scissors: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" x2="8.12" y1="4" y2="15.88"/><line x1="14.47" x2="20" y1="14.48" y2="20"/><line x1="8.12" x2="12" y1="8.12" y2="12"/></svg>,
            CheckCircle2: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>,
            Box: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>,
            ExternalLink: <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
        };

        // --- DATA DEL PRODUCTO (LIMPIA, SIN DATOS TÉCNICOS) ---
        const productData = {
    "header": {
        "brand": "L.L. BEAN",
        "collection": "Temporada 2026SS",
        "item": "Pima Crewneck S/S Petite",
        "ref": "278716",
        "color": "White",
        "img": "https://image.uniqlo.com/UQ/ST3/Latam/imagesgoods/422992/item/lggoods_12_422992.jpg?width=1600&impolicy=quality_75"
    },
    "steps": [
        {
            "id": 1,
            "stage": "ORIGEN",
            "title": "La Fibra Inicial",
            "date": "16 Dec 2025",
            "location": "Lima, Perú",
            "desc": "Fibra de algodón de alta calidad recepcionada en almacenes.",
            "icon": Icons.MapPin,
            "people": []
        },
        {
            "id": 2,
            "stage": "TEJEDURÍA",
            "title": "Arquitectos del Tejido",
            "date": "13 Jan 2026",
            "location": "Planta Tejido",
            "desc": "Tejido en máquinas circulares de alta precisión.",
            "icon": Icons.Shirt,
            "people": [
                {
                    "name": "Emer Vega",
                    "role": "Tejedor",
                    "id": "E003877"
                },
                {
                    "name": "Isaac Leon",
                    "role": "Tejedor",
                    "id": "E004208"
                },
                {
                    "name": "Heriberto Justo",
                    "role": "Tejedor",
                    "id": "E003835"
                },
                {
                    "name": "Nilo De La Cruz",
                    "role": "Tejedor",
                    "id": "E002292"
                },
                {
                    "name": "Fredy Bobbio",
                    "role": "Tejedor",
                    "id": "E000312"
                },
                {
                    "name": "Oscar Vidarte",
                    "role": "Tejedor",
                    "id": "E001181"
                }
            ]
        },
        {
            "id": 3,
            "stage": "TINTORERÍA",
            "title": "Maestros del Color",
            "date": "14 Jan 2026",
            "location": "Planta Tintorería",
            "desc": "Proceso de teñido y acabado de la tela.",
            "icon": Icons.Droplets,
            "people": [
                {
                    "name": "Jose More",
                    "role": "Apertura",
                    "id": "E004464"
                },
                {
                    "name": "Juan Nuñez",
                    "role": "Secado",
                    "id": "E000154"
                },
                {
                    "name": "Pedro Campos",
                    "role": "Acabado Tela",
                    "id": "E002286"
                }
            ]
        },
        {
            "id": 4,
            "stage": "CORTE",
            "title": "Geometría y Precisión",
            "date": "20 Jan 2026",
            "location": "Área de Corte",
            "desc": "Corte automatizado de piezas.",
            "icon": Icons.Scissors,
            "people": [
                {
                    "name": "Elizar Coronado",
                    "role": "Tendido",
                    "id": "O003592"
                },
                {
                    "name": "Edwin Diaz",
                    "role": "Tendido",
                    "id": "O00F960"
                },
                {
                    "name": "Javier Erazo",
                    "role": "Corte",
                    "id": "O002183"
                },
                {
                    "name": "Jose Aguilar",
                    "role": "Numeracion",
                    "id": "O00D617"
                }
            ]
        },
        {
            "id": 5,
            "stage": "CONFECCIÓN",
            "title": "Las Manos que Crean",
            "date": "Proceso Manual",
            "location": "Línea de Costura",
            "desc": "Un equipo de 2 especialistas ensambló esta prenda.",
            "icon": Icons.CheckCircle2,
            "people": [
                {
                    "name": "Marlon Sopla",
                    "role": "Basta Faldon",
                    "id": "O00F866"
                },
                {
                    "name": "Matilde Vasquez",
                    "role": "Supervisora",
                    "id": "E001985"
                }
            ]
        },
        {
            "id": 6,
            "stage": "LOGÍSTICA",
            "title": "Listo para el Mundo",
            "date": "28 Jan 2026",
            "location": "Centro de Distribución",
            "desc": "Empaque y certificación final.",
            "icon": Icons.Box,
            "people": [
                {
                    "name": "Juan Martinez",
                    "role": "Recepción",
                    "id": "O00F311"
                },
                {
                    "name": "Julio Laura",
                    "role": "Empaque Final",
                    "id": "O00J741"
                }
            ]
        }
    ]
};

        // --- COMPONENTES INTELIGENTES ---

        // 1. Tarjeta de Persona (Foto Real con Fallback)
        const PersonCard = ({ person }) => {
            // URL Real (Interna Nettalco)
            const nettalcoPhoto = person.id ? `http://app.nettalco.com.pe/php/foto.php?codigo=${person.id}` : null;
            // URL Fallback (Dibujo)
            const drawingAvatar = `https://api.dicebear.com/7.x/avataaars/svg?seed=${person.name}&backgroundColor=c0aede,b6e3f4`;

            const [imgSrc, setImgSrc] = useState(nettalcoPhoto || drawingAvatar);

            const itemVariants = {
                hidden: { opacity: 0, y: 50, scale: 0.5 },
                visible: { 
                    opacity: 1, y: 0, scale: 1,
                    transition: { type: "spring", stiffness: 200, damping: 15 }
                }
            };

            return (
                <motion.div variants={itemVariants} className="flex flex-col items-center p-3 bg-gray-50 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                    <div className="w-16 h-16 rounded-full overflow-hidden mb-2 border-2 border-white shadow-sm bg-white relative">
                        <img 
                            src={imgSrc} 
                            alt={person.name} 
                            className="w-full h-full object-cover"
                            // Si falla la foto real, carga el dibujo
                            onError={() => setImgSrc(drawingAvatar)}
                        />
                    </div>
                    <h4 className="text-xs font-bold text-gray-800 text-center leading-tight">{person.name}</h4>
                    <span className="text-[10px] text-gray-500 text-center mt-1 uppercase tracking-wide px-1 truncate w-full">{person.role}</span>
                </motion.div>
            );
        };

        const StepCard = ({ step }) => {
            const containerVariants = {
                hidden: { opacity: 0 },
                visible: { opacity: 1, transition: { staggerChildren: 0.1 } }
            };

            return (
                <div className="relative pl-8 pb-12 last:pb-0 border-l-2 border-gray-200 ml-4">
                    <div className="absolute -left-[21px] top-0 bg-white p-2 rounded-full border-2 border-green-700 text-green-800 shadow-sm">
                        {step.icon}
                    </div>
                    <div className="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                        <div className="flex justify-between items-start mb-2">
                            <span className="text-[10px] font-bold tracking-widest text-green-700 uppercase bg-green-50 px-2 py-1 rounded">{step.stage}</span>
                            <span className="text-xs text-gray-400 font-mono">{step.date}</span>
                        </div>
                        <h3 className="text-xl font-bold text-gray-900 mb-1">{step.title}</h3>
                        <p className="text-sm text-gray-500 mb-4 flex items-center gap-1">{step.icon} {step.location}</p>
                        <p className="text-sm text-gray-600 mb-6 leading-relaxed border-b border-gray-100 pb-4">{step.desc}</p>
                        
                        {/* Secciones de Datos Técnicos (ELIMINADAS/COMENTADAS para limpieza) */}
                        {/* {step.id === 1 && (
                            <div className="grid grid-cols-2 gap-2 mb-4 bg-gray-50 p-3 rounded-lg">
                                ... (código anterior eliminado)
                            </div>
                        )}
                        */}

                        {step.people.length > 0 && (
                            <div>
                                <p className="text-xs font-bold text-gray-400 mb-3 uppercase">Protagonistas</p>
                                <motion.div 
                                    variants={containerVariants}
                                    initial="hidden"
                                    whileInView="visible"
                                    viewport={{ once: true, margin: "-50px" }}
                                    className={`grid gap-3 ${step.people.length > 4 ? 'grid-cols-3' : 'grid-cols-2'}`}
                                >
                                    {step.people.map((person, idx) => (
                                        <PersonCard key={idx} person={person} />
                                    ))}
                                </motion.div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const App = () => {
            return (
                <div className="max-w-md mx-auto bg-white min-h-screen shadow-2xl overflow-hidden relative">
                    {/* HERO */}
                    <div className="relative h-[500px] bg-gray-900 text-white flex flex-col justify-end p-6">
                        <img src={productData.header.img} className="absolute inset-0 w-full h-full object-cover opacity-60" />
                        <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"></div>
                        <div className="relative z-10">
                            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.8 }}>
                                <div className="flex gap-2 mb-3">
                                    <span className="bg-white/20 backdrop-blur-md px-3 py-1 rounded-full text-xs font-medium">{productData.header.collection}</span>
                                </div>
                                <h1 className="text-4xl font-bold mb-2 leading-tight">{productData.header.item}</h1>
                                <p className="text-lg text-gray-200">Color: {productData.header.color}</p>
                            </motion.div>
                        </div>
                    </div>

                    {/* TIMELINE */}
                    <div className="p-6 bg-gray-50/50">
                        <div className="py-8">
                            {productData.steps.map(step => <StepCard key={step.id} step={step} />)}
                        </div>
                    </div>

                    {/* FOOTER */}
                    <div className="bg-gray-900 text-white p-8 pb-12 text-center relative overflow-hidden">
                        <div className="relative z-10">
                            <h2 className="text-2xl font-bold mb-2">Trazabilidad Verificada</h2>
                            <p className="text-gray-400 text-sm mb-6 max-w-xs mx-auto">La historia de estos 23 artesanos ha sido registrada inmutablemente.</p>
                            <a href="https://viewblock.io/arweave/tx/Mfn39OrbY-qfaZzH_OiweqYuOj6VuxLAgwtYXmqEcIg" target="_blank" className="inline-flex items-center gap-2 bg-white text-gray-900 px-6 py-3 rounded-full font-bold text-sm hover:scale-105 transition-transform">
                                {Icons.Box} Verificar en Blockchain {Icons.ExternalLink}
                            </a>
                        </div>
                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 via-emerald-500 to-green-900"></div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>